From f84329ae007bc501954df9c65a0e356be00f4f6a Mon Sep 17 00:00:00 2001
From: yaozenhu <yaozenhu@realtek.com>
Date: Fri, 30 Aug 2024 15:17:54 +0800
Subject: [PATCH] weston: if nplane > 1, convert to GL_TEXTURE_EXTERNAL_OES

Upstream-Status: Inappropriate [rtk specific]
---
 libweston/renderer-gl/gl-renderer.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/libweston/renderer-gl/gl-renderer.c b/libweston/renderer-gl/gl-renderer.c
index faf3bdf..5d53e5e 100644
--- a/libweston/renderer-gl/gl-renderer.c
+++ b/libweston/renderer-gl/gl-renderer.c
@@ -2840,6 +2840,9 @@ choose_texture_target(struct gl_renderer *gr,
 		}
 	}
 
+	if (attributes->n_planes > 1)
+		return GL_TEXTURE_EXTERNAL_OES;
+
 	switch (attributes->format & ~DRM_FORMAT_BIG_ENDIAN) {
 	case DRM_FORMAT_YUYV:
 	case DRM_FORMAT_YVYU:
-- 
2.34.1

